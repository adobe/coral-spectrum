/**
 * Copyright 2019 Adobe. All rights reserved.
 * This file is licensed to you under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License. You may obtain a copy
 * of the License at http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under
 * the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS
 * OF ANY KIND, either express or implied. See the License for the specific language
 * governing permissions and limitations under the License.
 */

// @spectrum
.coral-Table--hover {
  .coral-Table-head .coral-Table-row:hover {
    background-color: transparent;
  }
}

// @compat
.coral-Table--bordered {
  .coral-Table-body .coral-Table-row .coral-Table-cell {
    border-right-color: $table-border-color;
  }
}

/* Base */
._coral-Table-headerCell {
  color: $table-header-cell-color;
}

._coral-Table-cell {
  background-color: $table-background-color;
  color: $table-cell-color-members;
}

._coral-Table-head {
  ._coral-Table-row:not(:first-of-type) {
    ._coral-Table-cell,
    ._coral-Table-headerCell {
      border-top-color: $table-border-color;
    }
  }
}

._coral-Table-body {
  ._coral-Table-cell {
    border-top-color: $table-border-color;

    &:first-of-type {
      border-left-color: $table-border-color;
    }

    &:last-of-type {
      border-right-color: $table-border-color;
    }
  }

  ._coral-Table-row {
    &:first-of-type {
      ._coral-Table-cell {
        border-top-color: $table-border-color;
      }
    }

    &:last-of-type {
      ._coral-Table-cell {
        border-bottom-color: $table-border-color;
      }
    }
  }
}

._coral-Table-divider--cell {
  &._coral-Table-head {
    ._coral-Table-cell,
    ._coral-Table-headerCell {
      &:not(:last-of-type) {
        border-right-color: $table-border-color;
      }
    }
  }

  &._coral-Table-body {
    ._coral-Table-cell:not(:last-of-type) {
      border-right-color: $table-border-color;
    }
  }
}

._coral-Table-divider--column {
  &._coral-Table-head {
    ._coral-Table-cell,
    ._coral-Table-headerCell {
      &:not(:last-of-type) {
        border-right-color: $table-border-color;
      }
    }
  }

  &._coral-Table-body {
    ._coral-Table-cell:not(:last-of-type) {
      border-right-color: $table-border-color;
    }
  }
}
/* END Base */

/* #sticky */
._coral-Table-wrapper--sticky {
  ._coral-Table-wrapper-container {
    border-color: $table-border-color;
  }

  ._coral-Table-head[sticky] {
    ._coral-Table-row:last-of-type {
      ._coral-Table-headerCell {
        border-top: none;
      }
    }

    &._coral-Table-divider--row coral-table-headercell-content {
      border-top-color: $table-border-color;
    }

    &._coral-Table-divider--column coral-table-headercell-content {
      border-right-color: $table-border-color;
    }

    &._coral-Table-divider--cell coral-table-headercell-content {
      border-top-color: $table-border-color;
      border-right-color: $table-border-color;
    }
  }
}
/* END #sticky */

/* #variant */
._coral-Table-wrapper--quiet {
  ._coral-Table-cell {
    background: transparent;
  }

  ._coral-Table-body {
    ._coral-Table-cell {
      &:first-of-type {
        border-left-color: transparent;
      }

      &:last-of-type {
        border-right-color: transparent;
      }
    }
  }

  &._coral-Table-wrapper--sticky {
    ._coral-Table-wrapper-container {
      border-left-color: transparent;
      border-right-color: transparent;
    }
  }

  ._coral-Table-row[selectable] {
    ._coral-Table-cell {
      &[coral-table-cellselect] {
        &:hover {
          background-color: $table-quiet-background-color-hover;
        }
      }
    }
  }

  &._coral-Table-wrapper[lockable] ._coral-Table-row {
    &:hover {
      &:not(.is-selected) ._coral-Table-cell {
        background-color: $table-quiet-background-color-hover;
      }
    }
  }
}
/* END #variant */

/* #sortable */
._coral-Table-headerCell[sortable] {
  &:hover {
    color: $table-header-cell-color-hover;
  }

  &[sortabledirection="default"] {
    &:hover {
      coral-table-headercell-content:after {
        background-image: svgImport($table-sort-icon-url, 'path {fill: '+ $table-header-cell-icon-color +'}');
      }
    }
  }

  &[sortabledirection="ascending"] {
    coral-table-headercell-content:after {
      background-image: svgImport($table-sort-icon-url, 'path {fill: '+ $table-header-cell-icon-color +'}');
    }

    &:hover {
      coral-table-headercell-content:after {
        background-image: svgImport($table-sort-icon-url, 'path {fill: '+ $table-header-cell-icon-color-hover +'}');
      }
    }
  }

  &[sortabledirection="descending"] {
    coral-table-headercell-content:after {
      background-image: svgImport($table-sort-icon-url, 'path {fill: '+ $table-header-cell-icon-color +'}');
    }

    &:hover {
      coral-table-headercell-content:after {
        background-image: svgImport($table-sort-icon-url, 'path {fill: '+ $table-header-cell-icon-color-hover +'}');
      }
    }
  }
}
/* END #sortable */

/* #selectable */
._coral-Table-wrapper[selectable] {
  ._coral-Table-row {
    &:not([disabled]):hover {
      ._coral-Table-cell {
        background-color: $table-background-color-hover;
      }
    }

    &.is-selected {
      ._coral-Table-cell {
        background-color: $table-background-color-selected-members;
      }

      &:hover {
        ._coral-Table-cell {
          background-color: $table-background-color-selected-members-hover;
          color: $table-foreground-color-selected-members-hover;
        }
      }
    }
  }

  &._coral-Table-wrapper--quiet {
    ._coral-Table-row {
      &:not([disabled]):hover {
        ._coral-Table-cell {
          background-color: $table-quiet-background-color-hover;
        }
      }

      &.is-selected {
        ._coral-Table-cell {
          background-color: $table-quiet-background-color-selected;
        }

        &:hover {
          ._coral-Table-cell {
            background-color: $table-quiet-background-color-selected-hover;
          }
        }
      }
    }
  }
}
/* END #selectable */

/* #lockable */
._coral-Table-wrapper[lockable] ._coral-Table-row {
  [coral-table-rowlock] {
    &:hover {
      opacity: 1 !important;
    }
  }

  &[locked] {
    ._coral-Table-headerCell,
    ._coral-Table-cell {
      [coral-table-rowlock] {
        opacity: 1;
      }
    }
  }

  &:hover {
    [coral-table-rowlock] {
      opacity: .2;
    }

    &:not(.is-selected) ._coral-Table-cell {
      background-color: $table-background-color-hover;
    }
  }
}
/* END #lockable */

/* #orderable */
._coral-Table-row.is-dragging {
  ._coral-Table-cell,
  ._coral-Table-headerCell {
    opacity: .8;
  }
}

._coral-Table-wrapper {
  &:not(._coral-Table-wrapper--sticky) {
    ._coral-Table-row--placeholder {
      ._coral-Table-cell,
      ._coral-Table-headerCell {
        background: transparent;
      }
    }

  // Keep the table bottom border while dragging
    &.is-draggedLastItem  {
      ._coral-Table-body ._coral-Table-row:nth-last-of-type(2) {
        ._coral-Table-cell {
          border-bottom-color: $table-border-color;
        }
      }
    }
  }
}

._coral-Table-headerCell[orderable] {
  &:not([sortable]):hover {
    color: $table-header-cell-color-hover;
  }

  coral-table-headercell-content:before {
    background-image: svgImport($table-drag-handle-icon-url, 'circle {fill: '+ $table-header-cell-icon-color +'}');
  }

  &:hover {
    coral-table-headercell-content:before {
      background-image: svgImport($table-drag-handle-icon-url, 'circle {fill: '+ $table-header-cell-icon-color-hover +'}');
    }
  }
}
/* END #orderable */

/* a11y */
._coral-Table-headerCell {
  &:focus,
  &.is-focused,
  coral-table-headercell-content:focus,
  coral-table-headercell-content.is-focused {
    color: $table-header-cell-color-focused;
  }
}

._coral-Table-row {
  &:focus,
  &.is-focused {
    ._coral-Table-cell:first-of-type {
      &:after {
        border-left-color: $table-row-focused-color;
      }
    }
  }
}
/* END a11y */
